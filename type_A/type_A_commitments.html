<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>type_A_Commitments</title>
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="./css/commitments.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
    />
    <!-- <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="header_wrap">
          <div class="logo_wrap">
            <h1>
              <a href="./type_A.html"><img src="./img/logo.svg" /></a>
            </h1>
          </div>
          <nav>
            <ul>
              <li><a href="./type_A_about_us.html">About us</a></li>
              <li><a href="./type_A_brands.html">Brands</a></li>
              <li><a href="./type_A_our_culture.html">Our culture</a></li>
              <li><a href="./type_A_commitments.html">Commitments</a></li>
              <li><a href="./type_A_investors.html">Investors</a></li>
              <li><a href="./type_A_careers.html">Careers</a></li>
              <li><img src="./img/btn_lang.png" /></li>
            </ul>
          </nav>
        </div>
      </header>
      <section class="sec1">
        <h2>Commitments</h2>
      </section>
      <section class="sec2">
        <img src="./img/commitments/sec1_img.png" />
        <p>Amore<br />Beautiful World</p>
      </section>
      <div class="wrapper swiper1">
        <section class="horizontal">
          <div class="horizontal__container content-container">
            <div class="horizontal__scroll">
              <div class="swiper-wrapper">
                <div class="img_slide swiper-slide">
                  <img src="./img/commitments/sec2_img1.png" />
                  <p>
                    아모레퍼시픽은 더 나은 사회와 환경을 위한 도전 의지를
                    담아,<br />지속가능경영 목표 ‘2030 A MORE Beautiful Promise’
                    다섯 가지를 수립했습니다.
                  </p>
                  <div class="text_wrap">
                    <h2>지속가능경영</h2>
                    <img src="./img/about_us/sec3_btn.svg" />
                  </div>
                </div>
                <div class="img_slide swiper-slide">
                  <img src="./img/commitments/sec2_img2.png" />
                  <p>
                    아모레퍼시픽은 제품의 기능적 품질을 넘어서 고객의
                    관점에서<br />고객을 만족시키기 위한 품질이 중요하다고
                    생각합니다.
                  </p>
                  <div class="text_wrap">
                    <h2>고객안심품질</h2>
                    <img src="./img/about_us/sec3_btn.svg" />
                  </div>
                </div>
                <div class="img_slide swiper-slide">
                  <img src="./img/commitments/sec2_img3.png" />
                  <p>
                    아모레퍼시픽은 생명 존중의 원칙을 바탕으로 과학 기술의
                    혁신을<br />끊임없이 추구하며모두에게 가치 있는 아름다움을
                    전하고자 노력합니다.
                  </p>
                  <div class="text_wrap">
                    <h2>생명존중원칙</h2>
                    <img src="./img/about_us/sec3_btn.svg" />
                  </div>
                </div>
                <div class="img_slide swiper-slide">
                  <img src="./img/commitments/sec2_img4.png" />
                  <p>
                    아모레퍼시픽그룹은 1945년 창립 이래 ‘사람을 아름답게, 세상을
                    아름답게’ 하고자 하는<br />소명을 새기며 한국의 뷰티 산업을
                    이끌었습니다.
                  </p>
                  <div class="text_wrap">
                    <h2>지속가능성 보고서</h2>
                    <img src="./img/about_us/sec3_btn.svg" />
                  </div>
                </div>
                <div class="img_slide swiper-slide">
                  <img src="./img/commitments/sec2_img5.png" />
                  <p>
                    아모레퍼시픽은 2007년 11월 UN Global Compact에 가입하고<br />기업시민으로
                    역할과 책임을 다하기 위해 인권 노동, 환경,<br />반부패에
                    대한 UNGC 10대 원칙을 지지하고 성실한 이행을 위해 노력하고
                    있습니다.
                  </p>
                  <div class="text_wrap">
                    <h2>UN Global Compact</h2>
                    <img src="./img/about_us/sec3_btn.svg" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <footer>
        <ul>
          <li>윤리경영</li>
          <li>인재채용</li>
          <li>고객서비스</li>
          <li>글로벌 네트워크</li>
          <li>매거진</li>
          <li>사이트맵</li>
          <li>관련사이트</li>
          <li>법적고지</li>
          <li>개인정보 처리방침</li>
        </ul>
        <div><img src="./img/footer.svg" /></div>
        <p>© Since 1945 Amorepacific, All Rights Reserved.</p>
      </footer>
    </div>
    <script>
      gsap.registerPlugin(ScrollTrigger);

      const sections = gsap.utils.toArray(".swiper-slide");
      let maxWidth = 0;

      const getMaxWidth = () => {
        maxWidth = 0;
        sections.forEach((section) => {
          maxWidth += section.offsetWidth;
          maxWidth += gsap.getProperty(section, "marginLeft");
        });

        maxWidth += gsap.getProperty(".horizontal", "paddingLeft");
        maxWidth += gsap.getProperty(".swiper-wrapper", "paddingLeft");
        // after the calculations above the right side of the last image  should be flush against the right side of the window
        // but with the scrollbar sitting on top of it, so you might want to add some space
        // if you want the white margin/padding to be visible
        maxWidth += 40;

        return maxWidth;
      };

      getMaxWidth();
      ScrollTrigger.addEventListener("refreshInit", getMaxWidth);

      // gsap.set(".swiper-slide h2", {
      //   y: 50,
      //   opacity: 0,
      // });

      let scrollTween = gsap.to(sections, {
        x: () => `-${maxWidth - window.innerWidth}`,
        ease: "none",
        scrollTrigger: {
          trigger: ".horizontal",
          pin: ".wrapper",
          scrub: 0.5,
          markers: false,
          //   start: "50% 50%",
          end: () => `+=${maxWidth}`,
          invalidateOnRefresh: true,
        },
      });

      sections.forEach((sct, i) => {
        const heading = sct;
        heading &&
          gsap.to(heading, {
            duration: 1,
            y: 0,
            opacity: 1,
            scrollTrigger: {
              trigger: heading,
              pinnedContainer: ".wrapper",
              containerAnimation: scrollTween,
              start: "50% 100%",
              end: "100% 0%",
              markers: false,
              toggleClass: "swiper-slide-active",
              toggleActions: "play pause resume reset",
            },
          });
      });
      const io = new IntersectionObserver(
        (entries) => {
          entries.forEach((e) => {
            const $target = document.querySelectorAll(".sec2");

            // 화면에 노출 상태에 따라 해당 엘리먼트의 class를 컨트롤
            if (e.isIntersecting) {
              for (i = 0; i < 3; i++) {
                $target[i].style.padding = "0";
              }
            }
          });
        },
        { threshold: [0.5] }
      );

      // 옵저버할 대상을 선택하여 관찰 시작
      const $items = document.querySelectorAll(".sec2");
      $items.forEach((item) => {
        io.observe(item);
      });

      const swiper1 = new Swiper(".swiper1", {
        // Optional parameters
        slidesPerView: 1.15,
        spaceBetween: 60,
        centeredSlides: true,
        centeredSlidesBounds: true,
        /* autoplay: {
                delay:6000,
                disableOnInteraction: false,
            }, */
        mousewheel: {
          releaseOnEdges: true,
        },
        speed: 2000,
      });
    </script>
  </body>
</html>
